# ุตูุญู ูพุฑููุงู ฺฉุงุฑุจุฑ

ุฑุงูููุง ฺฉุงูู ุตูุญู ูพุฑููุงู ฺฉุงุฑุจุฑ ุฏุฑ PlusMeet

## ๐ ููุฑุณุช ูุทุงูุจ

- [ููุฏูู](#ููุฏูู)
- [ุฏุณุชุฑุณ ุจู ุตูุญู](#ุฏุณุชุฑุณ-ุจู-ุตูุญู)
- [ุณุงุฎุชุงุฑ UI](#ุณุงุฎุชุงุฑ-ui)
- [ุงููุงุน ฺฉุงุฑุจุฑ](#ุงููุงุน-ฺฉุงุฑุจุฑ)
- [ููุฏูุง ูพุฑููุงู](#ููุฏูุง-ูพุฑููุงู)
- [ุขูพููุฏ ุขูุงุชุงุฑ/ููฺฏู](#ุขูพููุฏ-ุขูุงุชุงุฑููฺฏู)
- [ุชุบุฑ ุฑูุฒ ุนุจูุฑ](#ุชุบุฑ-ุฑูุฒ-ุนุจูุฑ)
- [API Endpoints](#api-endpoints)
- [ูููููโูุง ฺฉุฏ](#ูููููโูุง-ฺฉุฏ)

---

## ููุฏูู

ุตูุญู ูพุฑููุงู ฺฉุงุฑุจุฑ ุจู ฺฉุงุฑุจุฑุงู ุงู ุงูฺฉุงู ุฑุง ูโุฏูุฏ ฺฉู:

- ุงุทูุงุนุงุช ุดุฎุต ุฎูุฏ ุฑุง ูุดุงูุฏู ู ูุฑุงุด ฺฉููุฏ
- ุขูุงุชุงุฑ/ููฺฏู ุฎูุฏ ุฑุง ุขูพููุฏ ฺฉููุฏ
- ููุน ุญุณุงุจ ุฎูุฏ ุฑุง ุชุบุฑ ุฏููุฏ (ุดุฎุตุ ุณุงุฒูุงูุ ุฏููุช)
- ุฑูุฒ ุนุจูุฑ ุฎูุฏ ุฑุง ุชุบุฑ ุฏููุฏ
- ููฺฉโูุง ุดุจฺฉูโูุง ุงุฌุชูุงุน ุฑุง ุงุถุงูู ฺฉููุฏ

---

## ุฏุณุชุฑุณ ุจู ุตูุญู

### ูุณุฑ ุตูุญู

```
/profile
```

### ุดุฑุงุท ุฏุณุชุฑุณ

- ฺฉุงุฑุจุฑ ุจุงุฏ **ุงุญุฑุงุฒ ููุช ุดุฏู** ุจุงุดุฏ (Login required)
- ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุงฺฏู ูุจุงุดุฏุ ุจู ุตูุญู `/login` ูุฏุงุช ูโุดูุฏ

### ูุญูู ุฏุณุชุฑุณ

1. ุงุฒ ููู ฺฉุงุฑุจุฑ (ุจุนุฏ ุงุฒ ูุงฺฏู)
2. ุงุฒ URL ูุณุชูู: `http://localhost:3000/profile`
3. ุงุฒ ุฏุงุดุจูุฑุฏ ฺฉุงุฑุจุฑ

---

## ุณุงุฎุชุงุฑ UI

ุตูุญู ูพุฑููุงู ุงุฒ ุฏู ุจุฎุด ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ ุจุงุฒฺฏุดุช   ูพุฑููุงู ฺฉุงุฑุจุฑ                 โ
โ  09123456789                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                             โ
โ  โโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ          โ  โ   ุงุทูุงุนุงุช ุดุฎุต         โ  โ
โ  โ SIDEBAR  โ  โ                        โ  โ
โ  โ          โ  โ   โข ููุน ุญุณุงุจ           โ  โ
โ  โ โข ุขูุงุชุงุฑ โ  โ   โข ูุงู ู ูุงูู       โ  โ
โ  โ โข ูุถุนุช  โ  โ   โข ุงูู             โ  โ
โ  โ โข ููุดโูุง โ  โ   โข ุจูฺฏุฑุงู          โ  โ
โ  โ โข ุชุบุฑ  โ  โ   โข ููฺฉุดู            โ  โ
โ  โ   ุฑูุฒ    โ  โ   โข ุดุจฺฉูโูุง ุงุฌุชูุงุน  โ  โ
โ  โ          โ  โ                        โ  โ
โ  โโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Sidebar (ฺูพ)

1. **ุขูุงุชุงุฑ/ููฺฏู Card**

   - ููุงุด ุขูุงุชุงุฑ ุง ููฺฏู
   - ุฏฺฉูู ุขูพููุฏ ุชุตูุฑ ๐ท
   - ูพุดโููุงุด ูุญุธูโุง

2. **Info Card**

   - ููุน ุญุณุงุจ (Badge)
   - ูุถุนุช (Badge)
   - ููุดโูุง (Badges)

3. **ุฏฺฉูู ุชุบุฑ ุฑูุฒ**
   - ๐ ุชุบุฑ ุฑูุฒ ุนุจูุฑ

### Main Content (ุฑุงุณุช)

1. **Card Header**

   - ุนููุงู: "ุงุทูุงุนุงุช ุดุฎุต"
   - ุฏฺฉูู ูุฑุงุด โ๏ธ

2. **Form**
   - ููุฏูุง dynamic ุจุฑ ุงุณุงุณ `userType`
   - ุญุงูุช View (Read-Only)
   - ุญุงูุช Edit (ูุงุจู ูุฑุงุด)

---

## ุงููุงุน ฺฉุงุฑุจุฑ

### ๐ค ฺฉุงุฑุจุฑ ุดุฎุต (Individual)

**ููุฏูุง:**

- ูุงู
- ูุงู ุฎุงููุงุฏฺฏ
- ูุงู ููุงุด
- ุจูฺฏุฑุงู
- ุงูู
- ุงุณุชุงู ู ุดูุฑ
- ุดุจฺฉูโูุง ุงุฌุชูุงุน

**ูุซุงู:**

```json
{
  "userType": "individual",
  "firstName": "ุนู",
  "lastName": "ูุญูุฏ",
  "displayName": "ุนู ูุญูุฏ",
  "bio": "ุจุฑูุงููโููุณ Full Stack",
  "email": "ali@example.com",
  "location": {
    "state": "ุชูุฑุงู",
    "city": "ุชูุฑุงู"
  }
}
```

---

### ๐ข ฺฉุงุฑุจุฑ ุณุงุฒูุงู (Organization)

**ููุฏูุง:**

- ูุงู ุณุงุฒูุงู/ุจุฑูุฏ (ุงูุฒุงู โญ)
- ูุงู ูุฏุฑ
- ูุงู ุฎุงููุงุฏฺฏ ูุฏุฑ
- ุดูุงุณู ูู/ุซุจุช
- ูุจโุณุงุช
- ูุงู ููุงุด
- ุจูฺฏุฑุงู
- ุงูู
- ุงุณุชุงู ู ุดูุฑ
- ุดุจฺฉูโูุง ุงุฌุชูุงุน

**ูุซุงู:**

```json
{
  "userType": "organization",
  "organizationName": "ุดุฑฺฉุช ูพูุงุณ ูุช",
  "firstName": "ุนู",
  "lastName": "ูุญูุฏ",
  "nationalId": "1234567890",
  "website": "https://plusmeet.ir",
  "displayName": "ุดุฑฺฉุช ูพูุงุณ ูุช",
  "bio": "ูพูุชูุฑู ุฑูุฏุงุฏูุง ุงุฌุชูุงุน",
  "email": "info@plusmeet.ir"
}
```

---

### ๐ ฺฉุงุฑุจุฑ ุฏููุช (Government)

**ููุฏูุง:**

- ูุดุงุจู ฺฉุงุฑุจุฑ ุณุงุฒูุงู
- ููุฏูุง ุงุถุงู ูุฎุตูุต ููุงุฏูุง ุฏููุช (ุฏุฑ ุขูุฏู)

---

## ููุฏูุง ูพุฑููุงู

### ููุฏูุง ูุดุชุฑฺฉ

| ููุฏ                    | ููุน    | ุงูุฒุงู | ุชูุถุญุงุช                                               |
| ----------------------- | ------ | ------ | ----------------------------------------------------- |
| `userType`              | Enum   | โ     | ููุน ฺฉุงุฑุจุฑ: `individual`, `organization`, `government` |
| `displayName`           | String | โ     | ูุงู ููุงุด ุฏุฑ ูพุฑููุงู                                 |
| `bio`                   | Text   | โ     | ุจูฺฏุฑุงู (ุญุฏุงฺฉุซุฑ 500 ฺฉุงุฑุงฺฉุชุฑ)                         |
| `email`                 | Email  | โ     | ุขุฏุฑุณ ุงูู                                            |
| `location.state`        | String | โ     | ุงุณุชุงู                                                 |
| `location.city`         | String | โ     | ุดูุฑ                                                   |
| `socialLinks.instagram` | String | โ     | ุขุฏ ุงูุณุชุงฺฏุฑุงู                                       |
| `socialLinks.telegram`  | String | โ     | ุขุฏ ุชูฺฏุฑุงู                                           |
| `socialLinks.twitter`   | String | โ     | ุขุฏ ุชูุชุฑ                                           |
| `socialLinks.linkedin`  | String | โ     | ุขุฏ ููฺฉุฏู                                          |

### ููุฏูุง Individual

| ููุฏ        | ููุน    | ุงูุฒุงู | ุชูุถุญุงุช      |
| ----------- | ------ | ------ | ------------ |
| `firstName` | String | โ     | ูุงู          |
| `lastName`  | String | โ     | ูุงู ุฎุงููุงุฏฺฏ |

### ููุฏูุง Organization/Government

| ููุฏ               | ููุน    | ุงูุฒุงู | ุชูุถุญุงุช                      |
| ------------------ | ------ | ------ | ---------------------------- |
| `organizationName` | String | โ     | ูุงู ุณุงุฒูุงู/ุจุฑูุฏ              |
| `firstName`        | String | โ     | ูุงู ูุฏุฑ                     |
| `lastName`         | String | โ     | ูุงู ุฎุงููุงุฏฺฏ ูุฏุฑ            |
| `nationalId`       | String | โ     | ุดูุงุณู ูู ุง ุซุจุช (10-11 ุฑูู) |
| `website`          | URL    | โ     | ูุจโุณุงุช ุฑุณู                 |

---

## ุขูพููุฏ ุขูุงุชุงุฑ/ููฺฏู

### ูฺฺฏโูุง

- ุงูุชุฎุงุจ ุชุตูุฑ ุงุฒ ุฏุณุชฺฏุงู
- ููุงุด ูพุดโููุงุด ูุญุธูโุง
- ุจุฑุฑุณ ููุน ูุงู (ููุท ุชุตูุฑ)
- ุจุฑุฑุณ ุญุฌู ูุงู (ุญุฏุงฺฉุซุฑ 2MB)
- ุขูพููุฏ ุจู ุตูุฑุช base64

### ูุญูู ุงุณุชูุงุฏู

1. ฺฉูฺฉ ุฑู ุฏฺฉูู **"๐ท ุชุบุฑ ุชุตูุฑ"**
2. ุงูุชุฎุงุจ ุชุตูุฑ ุงุฒ ูุงู ููุฌุฑ
3. ููุชุธุฑ ุจูุงูุฏ ุชุง ุขูพููุฏ ฺฉุงูู ุดูุฏ
4. ุชุตูุฑ ุฌุฏุฏ ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ

### ูุญุฏูุฏุชโูุง

- ูุฑูุช ูุฌุงุฒ: JPG, PNG, GIF, WebP
- ุญุฏุงฺฉุซุฑ ุญุฌู: 2 ูฺฏุงุจุงุช
- ููุท ฺฉุงุฑุจุฑุงู ุณุงุฒูุงู/ุฏููุช ูโุชูุงููุฏ **ููฺฏู** ุขูพููุฏ ฺฉููุฏ

### ููููู ฺฉุฏ (Frontend)

```javascript
const handleAvatarUpload = async (e) => {
  const file = e.target.files?.[0];
  if (!file) return;

  // ุจุฑุฑุณ ููุน ูุงู
  if (!file.type.startsWith("image/")) {
    setError("ููุท ูุงูโูุง ุชุตูุฑ ูุฌุงุฒ ูุณุชูุฏ");
    return;
  }

  // ุจุฑุฑุณ ุญุฌู (2MB)
  if (file.size > 2 * 1024 * 1024) {
    setError("ุญุฌู ุชุตูุฑ ูุจุงุฏ ุจุดุชุฑ ุงุฒ 2 ูฺฏุงุจุงุช ุจุงุดุฏ");
    return;
  }

  // ุชุจุฏู ุจู base64
  const reader = new FileReader();
  reader.onloadend = async () => {
    const base64 = reader.result;

    const response = await fetchWithAuth("/api/user/upload-avatar", {
      method: "POST",
      body: JSON.stringify({
        image: base64,
        type: userType === "individual" ? "avatar" : "logo",
      }),
    });

    const data = await response.json();
    if (data.success) {
      console.log("ุขูพููุฏ ูููู!");
    }
  };

  reader.readAsDataURL(file);
};
```

---

## ุชุบุฑ ุฑูุฒ ุนุจูุฑ

### ูฺฺฏโูุง

- Modal ูุฏุฑู ุจุง Overlay
- ููุฏูุง:
  - ุฑูุฒ ูุนู
  - ุฑูุฒ ุฌุฏุฏ
  - ุชฺฉุฑุงุฑ ุฑูุฒ ุฌุฏุฏ
- ููุงุด/ูพููุงู ฺฉุฑุฏู ุฑูุฒ ๐
- ูุดุงูฺฏุฑ ูุฏุฑุช ุฑูุฒ (ุถุนู/ูุชูุณุท/ูู)
- Validation ฺฉุงูู
- ุจุณุชู ุฎูุฏฺฉุงุฑ ุจุนุฏ ุงุฒ ููููุช

### ูุญูู ุงุณุชูุงุฏู

1. ฺฉูฺฉ ุฑู ุฏฺฉูู **"๐ ุชุบุฑ ุฑูุฒ ุนุจูุฑ"** ุฏุฑ Sidebar
2. ูุงุฑุฏ ฺฉุฑุฏู **ุฑูุฒ ูุนู**
3. ูุงุฑุฏ ฺฉุฑุฏู **ุฑูุฒ ุฌุฏุฏ** (ุญุฏุงูู 6 ฺฉุงุฑุงฺฉุชุฑ)
4. ุชฺฉุฑุงุฑ **ุฑูุฒ ุฌุฏุฏ**
5. ฺฉูฺฉ ุฑู **"โ ุชุบุฑ ุฑูุฒ"**
6. ููุชุธุฑ ูพุงู ููููุช

### Validation

- ุฑูุฒ ุฌุฏุฏ ุจุงุฏ ุญุฏุงูู 6 ฺฉุงุฑุงฺฉุชุฑ ุจุงุดุฏ
- ุฑูุฒ ุฌุฏุฏ ู ุชฺฉุฑุงุฑ ุขู ุจุงุฏ ฺฉุณุงู ุจุงุดูุฏ
- ุฑูุฒ ุฌุฏุฏ ููโุชูุงูุฏ ุจุง ุฑูุฒ ูุนู ฺฉุณุงู ุจุงุดุฏ
- ุฑูุฒ ูุนู ุจุงุฏ ุตุญุญ ุจุงุดุฏ

### ูุดุงูฺฏุฑ ูุฏุฑุช ุฑูุฒ

| ฺฉุงุฑุงฺฉุชุฑ | ูุฏุฑุช     | ุฑูฺฏ    |
| ------- | -------- | ------ |
| < 6     | ุถุนู ๐ด  | ูุฑูุฒ   |
| 6-9     | ูุชูุณุท ๐ | ูุงุฑูุฌ |
| 10+     | ูู ๐ข   | ุณุจุฒ    |

---

## API Endpoints

### 1. ุฏุฑุงูุช ูพุฑููุงู

**Endpoint:** `GET /api/user/profile`

**Headers:**

```
Authorization: Bearer {accessToken}
```

**Response:**

```json
{
  "success": true,
  "data": {
    "phoneNumber": "09123456789",
    "firstName": "ุนู",
    "lastName": "ูุญูุฏ",
    "displayName": "ุนู ูุญูุฏ",
    "bio": "ุจุฑูุงููโููุณ Full Stack",
    "avatar": "data:image/png;base64,...",
    "email": "ali@example.com",
    "roles": ["user", "event_owner"],
    "state": "active",
    "userType": "individual",
    "socialLinks": {
      "instagram": "ali_dev",
      "telegram": "@ali_dev"
    },
    "location": {
      "state": "ุชูุฑุงู",
      "city": "ุชูุฑุงู"
    },
    "createdAt": "2025-01-01T00:00:00.000Z"
  }
}
```

---

### 2. ุจูโุฑูุฒุฑุณุงู ูพุฑููุงู

**Endpoint:** `PUT /api/user/profile`

**Headers:**

```
Authorization: Bearer {accessToken}
Content-Type: application/json
```

**Body:**

```json
{
  "firstName": "ุนู",
  "lastName": "ูุญูุฏ",
  "displayName": "ุนู ูุญูุฏ",
  "bio": "ุจุฑูุงููโููุณ Full Stack",
  "email": "ali@example.com",
  "userType": "individual",
  "socialLinks": {
    "instagram": "ali_dev",
    "telegram": "@ali_dev"
  },
  "location": {
    "state": "ุชูุฑุงู",
    "city": "ุชูุฑุงู"
  }
}
```

**Response:**

```json
{
  "success": true,
  "message": "ูพุฑููุงู ุจุง ููููุช ุจูโุฑูุฒุฑุณุงู ุดุฏ",
  "data": {
    /* updated profile */
  }
}
```

---

### 3. ุขูพููุฏ ุขูุงุชุงุฑ/ููฺฏู

**Endpoint:** `POST /api/user/upload-avatar`

**Headers:**

```
Authorization: Bearer {accessToken}
Content-Type: application/json
```

**Body:**

```json
{
  "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
  "type": "avatar"
}
```

**Response:**

```json
{
  "success": true,
  "message": "ุขูุงุชุงุฑ ุจุง ููููุช ุขูพููุฏ ุดุฏ",
  "data": {
    "avatar": "data:image/png;base64,..."
  }
}
```

---

### 4. ุชุบุฑ ุฑูุฒ ุนุจูุฑ

**Endpoint:** `PUT /api/user/change-password`

**Headers:**

```
Authorization: Bearer {accessToken}
Content-Type: application/json
```

**Body:**

```json
{
  "currentPassword": "123456",
  "newPassword": "newPassword123"
}
```

**Response:**

```json
{
  "success": true,
  "message": "ุฑูุฒ ุนุจูุฑ ุจุง ููููุช ุชุบุฑ ฺฉุฑุฏ"
}
```

**Errors:**

```json
{
  "success": false,
  "error": "InvalidPassword",
  "message": "ุฑูุฒ ุนุจูุฑ ูุนู ุงุดุชุจุงู ุงุณุช"
}
```

---

## ูููููโูุง ฺฉุฏ

### Component ุงุณุชูุงุฏู ุงุฒ ุตูุญู ูพุฑููุงู

```javascript
import { useRouter } from "next/navigation";
import { useAuth } from "@/contexts/AuthContext";

export default function ProfilePage() {
  const router = useRouter();
  const { isAuthenticated, fetchWithAuth } = useAuth();

  // Redirect if not authenticated
  useEffect(() => {
    if (!isAuthenticated) {
      router.push("/login");
    }
  }, [isAuthenticated, router]);

  // Fetch profile
  const fetchProfile = async () => {
    const response = await fetchWithAuth("/api/user/profile");
    const data = await response.json();

    if (data.success) {
      console.log(data.data);
    }
  };

  // Update profile
  const updateProfile = async (formData) => {
    const response = await fetchWithAuth("/api/user/profile", {
      method: "PUT",
      body: JSON.stringify(formData),
    });

    const data = await response.json();

    if (data.success) {
      console.log("ูพุฑููุงู ุจูโุฑูุฒุฑุณุงู ุดุฏ");
    }
  };

  return (
    <div>
      <h1>ูพุฑููุงู</h1>
      {/* ... */}
    </div>
  );
}
```

---

## ูฺฉุงุช ููู

### ุงููุช

- โ ุชูุงู endpoint ูุง ูุงุฒ ุจู Authentication ุฏุงุฑูุฏ
- โ ุฑูุฒ ุนุจูุฑ ุจุง bcrypt Hash ูโุดูุฏ
- โ ุชูุงู ุชุบุฑุงุช ุฏุฑ ActivityLog ุซุจุช ูโุดููุฏ
- โ Validation ุฏุฑ ุณูุช ุณุฑูุฑ ุงูุฌุงู ูโุดูุฏ

### Performance

- ุชุตุงูุฑ ุจู ุตูุฑุช base64 ุฐุฎุฑู ูโุดููุฏ (ูููุช)
- ุฏุฑ production ุงุฒ S3 ุง Cloudinary ุงุณุชูุงุฏู ุดูุฏ
- Cache ุจุฑุง ุงุทูุงุนุงุช ูพุฑููุงู

### UX

- ูพุงูโูุง ููููุช ู ุฎุทุง ูุงุถุญ ู ูุงุฑุณ
- Loading states ุจุฑุง ุชูุงู ุนููุงุช
- Responsive ุจุฑุง ููุจุงู ู ุชุจูุช
- Animations ูุฑู ู ุฒุจุง

---

## ูุดฺฉูุงุช ุฑุงุฌ

### 1. "ฺฉุงุฑุจุฑ ุงูุช ูุดุฏ"

**ุฏูู:** Token ูุงูุนุชุจุฑ ุง ูููุถ ุดุฏู  
**ุฑุงู ุญู:** ุงุฒ logout ู login ูุฌุฏุฏ ุงุณุชูุงุฏู ฺฉูุฏ

### 2. "ุญุฌู ุชุตูุฑ ุจุด ุงุฒ ุญุฏ ูุฌุงุฒ"

**ุฏูู:** ุชุตูุฑ ุจุดุชุฑ ุงุฒ 2MB ุงุณุช  
**ุฑุงู ุญู:** ุชุตูุฑ ุฑุง ูุดุฑุฏู ฺฉูุฏ ุง ุชุตูุฑ ฺฉูฺฺฉุชุฑ ุงูุชุฎุงุจ ฺฉูุฏ

### 3. "ุฑูุฒ ุนุจูุฑ ูุนู ุงุดุชุจุงู ุงุณุช"

**ุฏูู:** ุฑูุฒ ูุงุฑุฏ ุดุฏู ุตุญุญ ูุณุช  
**ุฑุงู ุญู:** ุฑูุฒ ุตุญุญ ุฑุง ูุงุฑุฏ ฺฉูุฏ ุง ุงุฒ "ูุฑุงููุด ุฑูุฒ" ุงุณุชูุงุฏู ฺฉูุฏ

### 4. ุตูุญู ุจู `/login` Redirect ูโุดูุฏ

**ุฏูู:** ฺฉุงุฑุจุฑ ูุงฺฏู ูุณุช  
**ุฑุงู ุญู:** ุงุจุชุฏุง Login ฺฉูุฏ

---

## ููฺฉโูุง ูุฑุชุจุท

- [ูุณุชูุฏุงุช RBAC](./RBAC_GUIDE.md)
- [ูุณุชูุฏุงุช User System](./USER_SYSTEM.md)
- [ูุณุชูุฏุงุช ุงุญุฑุงุฒ ููุช](./AUTH_DEBUGGING.md)
- [ุฑุงูููุง ุดุฑูุน](./GETTING_STARTED.md)

---

**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** 28 ุงฺฉุชุจุฑ 2025  
**ูุณุฎู:** 1.0.0


