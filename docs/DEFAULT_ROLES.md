# ๐ ููุดโูุง ูพุดโูุฑุถ ุณุณุชู

ุงู ุณูุฏ ุชูุงู ููุดโูุง ูพุดโูุฑุถ (System Roles) ุฏุฑ ูพูุชูุฑู PlusMeet ุฑุง ุชูุถุญ ูโุฏูุฏ.

---

## ๐ ููุฑุณุช ููุดโูุง

| ููุด         | Slug          | ุขฺฉูู | ุฑูฺฏ     | Priority | ุชูุถุญุงุช                          |
| ----------- | ------------- | ----- | ------- | -------- | -------------------------------- |
| ูุฏุฑ ุณุณุชู  | `admin`       | ๐    | #EF4444 | 100      | ุฏุณุชุฑุณ ฺฉุงูู ุจู ุชูุงู ุจุฎุดโูุง       |
| ูุฏุฑ ูุญุชูุง  | `moderator`   | ๐ก๏ธ    | #8B5CF6 | 60       | ูุฏุฑุช ูุญุชูุง ู ูุธุงุฑุช ุจุฑ ุฑูุฏุงุฏูุง |
| ูุงูฺฉ ุฑูุฏุงุฏ | `event_owner` | ๐    | #F59E0B | 50       | ุงุฌุงุฏ ู ูุฏุฑุช ุฑูุฏุงุฏูุง          |
| ฺฉุงุฑุจุฑ ุนุงุฏ  | `user`        | ๐ค    | #3B82F6 | 10       | ุฏุณุชุฑุณโูุง ูพุงู                  |
| ูููุงู      | `guest`       | ๐๏ธ    | #9CA3AF | 1        | ุฏุณุชุฑุณ ูุญุฏูุฏ ุจุฑุง ูููุงูโูุง       |

---

## 1๏ธโฃ ูุฏุฑ ุณุณุชู (Admin) ๐

### ุฏุณุชุฑุณโูุง ููู:

- โ ุฏุงุดุจูุฑุฏ (ฺฉุงูู)
- โ ฺฉุงุฑุจุฑุงู (ฺฉุงูู)
  - โ ูุณุช ฺฉุงุฑุจุฑุงู
  - โ ุงุฌุงุฏ ฺฉุงุฑุจุฑ
- โ ุฑูุฏุงุฏูุง (ฺฉุงูู)
  - โ ูุณุช ุฑูุฏุงุฏูุง
  - โ ุงุฌุงุฏ ุฑูุฏุงุฏ
- โ ูุฏุฑุช ุฏุณุชุฑุณ (RBAC) (ฺฉุงูู)
  - โ ููุดโูุง
  - โ ููููุง
  - โ API Endpoints
- โ ุชูุธูุงุช (ฺฉุงูู)

### ุฏุณุชุฑุณโูุง API:

- โ **ุฏุณุชุฑุณ ฺฉุงูู ุจู ุชูุงู API ูุง** (ุงุนุชุจุงุฑุณูุฌ ุฏุฑ middleware)

---

## 2๏ธโฃ ูุฏุฑ ูุญุชูุง (Moderator) ๐ก๏ธ

### ุฏุณุชุฑุณโูุง ููู:

- ๐๏ธ ุฏุงุดุจูุฑุฏ (ููุท ูุดุงูุฏู)
- ๐๏ธ ฺฉุงุฑุจุฑุงู (ููุท ูุดุงูุฏู)
  - ๐๏ธ ูุณุช ฺฉุงุฑุจุฑุงู
- โ ุฑูุฏุงุฏูุง (ฺฉุงูู)
  - โ ูุณุช ุฑูุฏุงุฏูุง
  - โ ุงุฌุงุฏ ุฑูุฏุงุฏ

### ุฏุณุชุฑุณโูุง API:

- `GET, PUT` โ `/api/user/profile` (ูพุฑููุงู ุฎูุฏ)
- `GET` โ `/api/admin/users` (ูุณุช ฺฉุงุฑุจุฑุงู)
- `GET, POST` โ `/api/events` (ุฑูุฏุงุฏูุง)
- `GET, PUT, DELETE` โ `/api/events/:id` (ูุฑุงุด/ุญุฐู ุฑูุฏุงุฏ ุฎุงุต)

### ฺฉุงุฑุจุฑุฏูุง:

- ูุธุงุฑุช ุจุฑ ูุญุชูุง ุฑูุฏุงุฏูุง
- ุชุงุฏ/ุฑุฏ ุฑูุฏุงุฏูุง ฺฉุงุฑุจุฑุงู
- ูุฏุฑุช ฺฏุฒุงุฑุดโูุง ุชุฎูู
- ูพุดุชุจุงู ุงุฒ ฺฉุงุฑุจุฑุงู

---

## 3๏ธโฃ ูุงูฺฉ ุฑูุฏุงุฏ (Event Owner) ๐

### ุฏุณุชุฑุณโูุง ููู:

- ๐๏ธ ุฏุงุดุจูุฑุฏ (ููุท ูุดุงูุฏู)
- โ ุฑูุฏุงุฏูุง (ฺฉุงูู)
  - โ ูุณุช ุฑูุฏุงุฏูุง
  - โ ุงุฌุงุฏ ุฑูุฏุงุฏ

### ุฏุณุชุฑุณโูุง API:

- `GET, PUT` โ `/api/user/profile` (ูพุฑููุงู ุฎูุฏ)
- `GET, POST` โ `/api/events` (ุฑูุฏุงุฏูุง)
- `GET, PUT, DELETE` โ `/api/events/:id` (ูุฑุงุด/ุญุฐู ุฑูุฏุงุฏ ุฎูุฏ)

### ฺฉุงุฑุจุฑุฏูุง:

- ุงุฌุงุฏ ู ูุฏุฑุช ุฑูุฏุงุฏูุง ุฎูุฏ
- ูุฑุงุด ุงุทูุงุนุงุช ุฑูุฏุงุฏ
- ูุฏุฑุช ุดุฑฺฉุชโฺฉููุฏฺฏุงู
- ูุดุงูุฏู ุขูุงุฑ ุฑูุฏุงุฏ

---

## 4๏ธโฃ ฺฉุงุฑุจุฑ ุนุงุฏ (User) ๐ค

### ุฏุณุชุฑุณโูุง ููู:

- ๐๏ธ ุฏุงุดุจูุฑุฏ (ููุท ูุดุงูุฏู)
- ๐๏ธ ุฑูุฏุงุฏูุง (ููุท ูุดุงูุฏู)
  - ๐๏ธ ูุณุช ุฑูุฏุงุฏูุง

### ุฏุณุชุฑุณโูุง API:

- `GET, PUT` โ `/api/user/profile` (ูพุฑููุงู ุฎูุฏ)
- `GET` โ `/api/events` (ูุดุงูุฏู ูุณุช ุฑูุฏุงุฏูุง)
- `GET` โ `/api/events/:id` (ูุดุงูุฏู ุฌุฒุฆุงุช ุฑูุฏุงุฏ)

### ฺฉุงุฑุจุฑุฏูุง:

- ูุดุงูุฏู ู ุฌุณุชุฌู ุฑูุฏุงุฏูุง
- ุซุจุชโูุงู ุฏุฑ ุฑูุฏุงุฏูุง
- ูุฏุฑุช ูพุฑููุงู ุดุฎุต
- ุงุฑุชูุง ุจู Event Owner (ุฏุฑ ุตูุญู ูพุฑููุงู)

---

## 5๏ธโฃ ูููุงู (Guest) ๐๏ธ

### ุฏุณุชุฑุณโูุง ููู:

- ๐๏ธ ุฑูุฏุงุฏูุง (ููุท ูุดุงูุฏู)
  - ๐๏ธ ูุณุช ุฑูุฏุงุฏูุง

### ุฏุณุชุฑุณโูุง API:

- `GET` โ `/api/events` (ูุดุงูุฏู ุฑูุฏุงุฏูุง ุนููู)
- `GET` โ `/api/events/:id` (ูุดุงูุฏู ุฌุฒุฆุงุช ุฑูุฏุงุฏ ุนููู)

### ฺฉุงุฑุจุฑุฏูุง:

- ูุฑูุฑ ุฑูุฏุงุฏูุง ุนููู ุจุฏูู ุซุจุชโูุงู
- ูุดุงูุฏู ุฌุฒุฆุงุช ุฑูุฏุงุฏูุง ุนููู
- **ูุญุฏูุฏุช:** ููโุชูุงูุฏ ุฑูุฏุงุฏ ุงุฌุงุฏ ฺฉูุฏ ุง ุฏุฑ ุฑูุฏุงุฏูุง ุดุฑฺฉุช ฺฉูุฏ

---

## ๐ ฺุฑุฎู ุงุฑุชูุง ููุด (Role Upgrade Path)

```
Guest (ูููุงู) โ ุซุจุชโูุงู โ User (ฺฉุงุฑุจุฑ ุนุงุฏ)
                                    โ
                                Self-Upgrade
                                    โ
                            Event Owner (ูุงูฺฉ ุฑูุฏุงุฏ)
                                    โ
                            Admin Assignment
                                    โ
                            Moderator (ูุฏุฑ ูุญุชูุง)
```

### ูฺฉุงุช:

1. **Guest โ User**: ุฎูุฏฺฉุงุฑ ูพุณ ุงุฒ ุซุจุชโูุงู ู ุชุงุฏ OTP
2. **User โ Event Owner**:
   - Self-service ุฏุฑ ุตูุญู ูพุฑููุงู (ุฏฺฉูู "ุงุฑุชูุง ุจู ูุงูฺฉ ุฑูุฏุงุฏ")
   - ุง ุงูุชุฎุงุจ ุฏุฑ ุฒูุงู ุซุจุชโูุงู
3. **โ Moderator/Admin**: ููุท ุชูุณุท Admin ุงุฒ ุทุฑู ูพูู ูุฏุฑุช

---

## โ๏ธ ูุญูู ุงุฌุงุฏ ุฏูุจุงุฑู ููุดโูุง ูพุดโูุฑุถ

ุงฺฏุฑ ููุดโูุง ูพุดโูุฑุถ ุฏุฑ ุฏุชุงุจุณ ูุฌูุฏ ูุฏุงุฑูุฏุ ุงุฒ ฺฉ ุงุฒ ุฑูุดโูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

### ุฑูุด 1: ุงุฒ ูพูู ุงุฏูู (ุชูุตู ูโุดูุฏ)

1. ุจู `/admin/rbac/seed` ุจุฑูุฏ
2. ุฑู ุฏฺฉูู **"๐ ุงุฌุฑุง Seed"** ฺฉูฺฉ ฺฉูุฏ
3. ููุชุธุฑ ุจูุงูุฏ ุชุง ูพุงู ููููุช ููุงุด ุฏุงุฏู ุดูุฏ

### ุฑูุด 2: ุงุฒ Terminal

```bash
npm run seed-rbac
```

### ูุชุฌู:

- โ 5 ููุด ูพุดโูุฑุถ (admin, moderator, event_owner, user, guest)
- โ ุชูุงู ููููุง (dashboard, users, events, rbac, settings)
- โ ุชูุงู API endpoints ุจุง ูุชุฏูุง ูุฌุงุฒ

---

## ๐ก๏ธ ุญูุงุธุช ุงุฒ ููุดโูุง ุณุณุชู

ููุดโูุง ูพุดโูุฑุถ (`isSystem: true`) ุฏุงุฑุง ูุญุฏูุฏุชโูุง ุฒุฑ ูุณุชูุฏ:

โ **ูุงุจู ุญุฐู ูุณุชูุฏ**

- Admin ููโุชูุงูุฏ ููุดโูุง ุณุณุชู ุฑุง ุญุฐู ฺฉูุฏ

โ **ูุงุจู ูุฑุงุด ูุณุชูุฏ** (ูุญุฏูุฏ)

- ูโุชูุงู `description` ู `color` ุฑุง ุชุบุฑ ุฏุงุฏ
- ูโุชูุงู `menuPermissions` ู `apiPermissions` ุฑุง ุชุบุฑ ุฏุงุฏ
- **ููโุชูุงู `slug` ุฑุง ุชุบุฑ ุฏุงุฏ** (ุจุฑุง ุญูุธ ุณุงุฒฺฏุงุฑ)

---

## ๐ ููุงุณู ููุดโูุง

| ูฺฺฏ                | Guest | User | Event Owner | Moderator | Admin |
| -------------------- | ----- | ---- | ----------- | --------- | ----- |
| ูุดุงูุฏู ุฑูุฏุงุฏูุง      | โ    | โ   | โ          | โ        | โ    |
| ุซุจุชโูุงู ุฏุฑ ุฑูุฏุงุฏ    | โ    | โ   | โ          | โ        | โ    |
| ุงุฌุงุฏ ุฑูุฏุงุฏ         | โ    | โ   | โ          | โ        | โ    |
| ูุฑุงุด ุฑูุฏุงุฏ ุฎูุฏ    | โ    | โ   | โ          | -         | โ    |
| ูุฑุงุด ุฑูุฏุงุฏ ุฏฺฏุฑุงู | โ    | โ   | โ          | โ        | โ    |
| ูุดุงูุฏู ูุณุช ฺฉุงุฑุจุฑุงู  | โ    | โ   | โ          | โ        | โ    |
| ุชุบุฑ ููุด ฺฉุงุฑุจุฑุงู    | โ    | โ   | โ          | โ        | โ    |
| ูุฏุฑุช RBAC          | โ    | โ   | โ          | โ        | โ    |

---

## ๐ ูุซุงูโูุง ุงุณุชูุงุฏู ุฏุฑ ฺฉุฏ

### ฺฺฉ ฺฉุฑุฏู ููุด ุฏุฑ Frontend:

```javascript
import { usePermission } from "@/hooks/usePermission";

function MyComponent() {
  const { isAdmin, isEventOwner, isModerator } = usePermission();

  return (
    <>
      {isAdmin && <AdminPanel />}
      {isEventOwner && <CreateEventButton />}
      {isModerator && <ModerateContent />}
    </>
  );
}
```

### ฺฺฉ ฺฉุฑุฏู ููุด ุฏุฑ Backend:

```javascript
import { requireRole } from "@/lib/middleware/auth";

export async function PUT(req, { params }) {
  const authResult = await requireRole(req, ["admin", "moderator"]);
  if (!authResult.success) {
    return NextResponse.json({ error: authResult.error }, { status: 403 });
  }

  // ...
}
```

---

## ๐ ููุงุจุน ูุฑุชุจุท

- [RBAC_GUIDE.md](./RBAC_GUIDE.md) - ุฑุงูููุง ฺฉุงูู RBAC
- [COOKIE_AUTH_GUIDE.md](./COOKIE_AUTH_GUIDE.md) - ุณุณุชู ุงุญุฑุงุฒ ููุช
- [USER_MANAGEMENT.md](./USER_MANAGEMENT.md) - ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- [ADMIN_ROLES_MANAGEMENT.md](./ADMIN_ROLES_MANAGEMENT.md) - ูุฏุฑุช ููุดโูุง ุชูุณุท Admin

---

**ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู:** 29 ุงฺฉุชุจุฑ 2025  
**ูุณุฎู:** 1.0.0

