# ๐งญ ูุณุชูุฏุงุช Navigation Sidebar

> ุณุณุชู ููู ฺูุฏ ุณุทุญ ู ฺฉุงููุงู ุฏูุงูฺฉ ุฏุฑ PlusMeet

## ๐ ูุญู ููุงุด

```
Admin Panel Sidebar (ุณูุช ุฑุงุณุช ุตูุญู ุฏุฑ ุชูุงู ุตูุญุงุช ูพูู ุงุฏูู)
```

## ๐ฏ ูฺฺฏโูุง

### 1๏ธโฃ **ุณุงุฎุชุงุฑ ฺูุฏ ุณุทุญ (Multi-Level Tree)**

ููููุง ุจู ุตูุฑุช ุฏุฑุฎุช ุจุง ุงูฺฉุงู ุจุงุฒ/ุจุณุชู ุดุฏู ููุงุด ุฏุงุฏู ูโุดููุฏ:

```
๐ ุฏุงุดุจูุฑุฏ
๐ฅ ฺฉุงุฑุจุฑุงู โผ
   โโโ ูุณุช ฺฉุงุฑุจุฑุงู
   โโโ ุงุฌุงุฏ ฺฉุงุฑุจุฑ
๐ ุฑูุฏุงุฏูุง โผ
   โโโ ูุณุช ุฑูุฏุงุฏูุง โผ
       โโโ ุฑูุฏุงุฏูุง ูุนุงู
       โโโ ุฑูุฏุงุฏูุง ุขุฑุดู
   โโโ ุงุฌุงุฏ ุฑูุฏุงุฏ
โ๏ธ ุชูุธูุงุช ุณุณุชู โผ
   โโโ ูุฏุฑุช ููููุง
   โโโ ููฺฏุงูโุณุงุฒ API
```

### 2๏ธโฃ **ุจุงุฒ/ุจุณุชู ฺฉุฑุฏู ููููุง (Collapsible/Expandable)**

- **ุขฺฉูู โ**: ููู ุจุณุชู ุงุณุชุ ุจุฑุง ุจุงุฒ ฺฉุฑุฏู ฺฉูฺฉ ฺฉูุฏ
- **ุขฺฉูู โผ**: ููู ุจุงุฒ ุงุณุชุ ุจุฑุง ุจุณุชู ฺฉูฺฉ ฺฉูุฏ
- **ุงููุดู**: ุจุงุฒ/ุจุณุชู ุดุฏู ุจุง ุงููุดู smooth

### 3๏ธโฃ **ุงุณุชุงูโูุง ูุชูุงูุช**

#### ููู ุงุตู (Root Level):

- ูพุฏูฺฏ ุนุงุฏ
- ุขฺฉูู ุจุฒุฑฺฏ
- ุจุฏูู ุจูุฑุฏุฑ

#### ุฒุฑููู (Submenu):

- ูพุฏูฺฏ ุจุดุชุฑ (Indent)
- ูููุช ฺฉูฺฺฉโุชุฑ (0.9rem)
- ุจูุฑุฏุฑ ุฑุงุณุช ุจุฑุง ููุงุด ุณูุณูู ูุฑุงุชุจ
- ุชุบุฑ ุฑูฺฏ ุจูุฑุฏุฑ ุฏุฑ hover

### 4๏ธโฃ **ุญุงูุชโูุง ูุฎุชูู**

#### ููู ุจุง ููฺฉ (Leaf Node):

```javascript
{
  menuId: "users.list",
  title: "ูุณุช ฺฉุงุฑุจุฑุงู",
  href: "/admin/users",      // โ ุฏุงุฑุง path
  hasChildren: false
}
```

#### ููู ฺฏุฑูู (Folder):

```javascript
{
  menuId: "users",
  title: "ฺฉุงุฑุจุฑุงู",
  href: null,                // โ ุจุฏูู path
  hasChildren: true,
  children: [...]
}
```

#### ููู ุจุง ููฺฉ + ุฒุฑููู:

```javascript
{
  menuId: "events.list",
  title: "ูุณุช ุฑูุฏุงุฏูุง",
  href: "/admin/events",     // โ ุฏุงุฑุง path
  hasChildren: true,         // โ ู ุฒุฑููู ูู ุฏุงุฑู!
  children: [...]
}
```

---

## ๐จ ุทุฑุงุญ UI/UX

### ุขฺฉููโูุง:

- **โ** (ูุซูุซ ุฑุงุณุช): ููู ุจุณุชู ุงุณุช
- **โผ** (ูุซูุซ ูพุงู): ููู ุจุงุฒ ุงุณุช

### ุฑูฺฏโูุง:

- **ูพุดโูุฑุถ**: ุฎุงฺฉุณุชุฑ (`--color-text-secondary`)
- **Hover**: ุณูุฏ/ูุดฺฉ (`--color-text-primary`)
- **Active**: ุขุจ ุจุง ุณุงู (`--color-primary`)

### Indent (ูุงุตูู ุงุฒ ุฑุงุณุช):

- **ุณุทุญ 0** (Root): `1rem`
- **ุณุทุญ 1**: `2.5rem` (1.5 \* 1 + 1)
- **ุณุทุญ 2**: `4rem` (1.5 \* 2 + 1)
- **ุณุทุญ 3**: `5.5rem` (1.5 \* 3 + 1)

### ุจูุฑุฏุฑ ุฑุงุณุช:

- **ุฑูฺฏ**: `--color-border`
- **ุถุฎุงูุช**: `2px`
- **Hover**: `--color-primary`

---

## ๐ง ูุญูู ฺฉุงุฑ (Technical)

### 1๏ธโฃ Fetch ููููุง:

```javascript
// ุงุฒ API ุฏุฑุงูุช ูโุดูุฏ
GET /api/user/menus

// ูพุงุณุฎ (Tree Structure):
{
  "success": true,
  "menus": [
    {
      "menuId": "users",
      "title": "ฺฉุงุฑุจุฑุงู",
      "path": null,
      "children": [
        {
          "menuId": "users.list",
          "title": "ูุณุช ฺฉุงุฑุจุฑุงู",
          "path": "/admin/users",
          "children": []
        }
      ]
    }
  ]
}
```

### 2๏ธโฃ Format ุจู ูุฑูุช ููุฑุฏ ูุงุฒ:

```javascript
const formatMenuTree = (menus) => {
  return menus.map((menu) => ({
    menuId: menu.menuId,
    title: menu.title,
    href: menu.path,
    active: menu.path && pathname.startsWith(menu.path),
    icon: getMenuIcon(menu.menuId),
    hasChildren: menu.children && menu.children.length > 0,
    children: menu.children ? formatMenuTree(menu.children) : [],
  }));
};
```

### 3๏ธโฃ Render ุจู ุตูุฑุช Recursive:

```javascript
const renderMenuItem = (item, level) => {
  const isExpanded = expandedMenus.has(item.menuId);

  return (
    <div key={item.menuId}>
      {/* Parent Menu */}
      <div onClick={() => toggleMenu(item.menuId)}>
        {item.icon} {item.title} {isExpanded ? "โผ" : "โ"}
      </div>

      {/* Children (Recursive) */}
      {isExpanded &&
        item.children.map((child) => renderMenuItem(child, level + 1))}
    </div>
  );
};
```

### 4๏ธโฃ Toggle State:

```javascript
const [expandedMenus, setExpandedMenus] = useState(new Set());

const toggleMenu = (menuId) => {
  setExpandedMenus((prev) => {
    const newSet = new Set(prev);
    if (newSet.has(menuId)) {
      newSet.delete(menuId); // ุจุณุชู
    } else {
      newSet.add(menuId); // ุจุงุฒ ฺฉุฑุฏู
    }
    return newSet;
  });
};
```

---

## ๐ ูฺฉุงุช ููู

### โ ุงูุฌุงู ุฏูุฏ:

- ููููุง ุจุฏูู `path` ุจู ุนููุงู ฺฏุฑูู (folder) ุนูู ูโฺฉููุฏ
- ููููุง ุจุง `path` + `children` ูู ููฺฉ ูุณุชูุฏุ ูู ฺฏุฑูู
- ุงุฒ `menuId` ฺฉุชุง ุจุฑุง toggle ุงุณุชูุงุฏู ูโุดูุฏ
- Indent ุงุชููุงุชฺฉ ุจุฑุงุณุงุณ `level` ูุญุงุณุจู ูโุดูุฏ

### โ ุงูุฌุงู ูุฏูุฏ:

- ููู ุจุฏูู `path` ู ุจุฏูู `children` ูุณุงุฒุฏ (ูุนู ูุฏุงุฑู)
- ุฏฺฉูู expand ุฑุง ุฑู ููููุง ุจุฏูู `children` ูุดุงู ูุฏูุฏ
- Indent ุจุด ุงุฒ ุญุฏ ุฒุงุฏ ูุฏูุฏ (ุญุฏุงฺฉุซุฑ 4-5 ุณุทุญ)

---

## ๐ฌ ูุซุงู ฺฉุงุฑุจุฑุฏ

### ุณูุงุฑู: ฺฉูฺฉ ุฑู "ฺฉุงุฑุจุฑุงู"

#### ูุถุนุช ุงููู:

```
๐ฅ ฺฉุงุฑุจุฑุงู โ  (expandedMenus = Set())
```

#### ุจุนุฏ ุงุฒ ฺฉูฺฉ:

```
๐ฅ ฺฉุงุฑุจุฑุงู โผ  (expandedMenus = Set(['users']))
   โโโ ูุณุช ฺฉุงุฑุจุฑุงู
   โโโ ุงุฌุงุฏ ฺฉุงุฑุจุฑ
```

#### ุจุนุฏ ุงุฒ ฺฉูฺฉ ุฏูุจุงุฑู:

```
๐ฅ ฺฉุงุฑุจุฑุงู โ  (expandedMenus = Set())
```

---

## ๐ ูฺฺฏโูุง ูพุดุฑูุชู

### 1๏ธโฃ **Deep Linking**:

ุงฺฏุฑ ุตูุญูโุง ฺฉู ุจุงุฒ ุดุฏู ุฒุฑููู ุจุณุชูโุง ุงุณุชุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุงูุฏูุงุด ุจุงุฒ ูโุดููุฏ.

```javascript
// ูุซุงู: /admin/users/list ุจุงุฒ ุดุฏ
// ฺฉุงุฑุจุฑุงู โ ูุณุช ฺฉุงุฑุจุฑุงู (active)
```

### 2๏ธโฃ **Persistent State**:

ูโุชูุงูุฏ state `expandedMenus` ุฑุง ุฏุฑ `localStorage` ุฐุฎุฑู ฺฉูุฏ:

```javascript
useEffect(() => {
  const saved = localStorage.getItem("expandedMenus");
  if (saved) {
    setExpandedMenus(new Set(JSON.parse(saved)));
  }
}, []);

useEffect(() => {
  localStorage.setItem("expandedMenus", JSON.stringify([...expandedMenus]));
}, [expandedMenus]);
```

### 3๏ธโฃ **Keyboard Navigation**:

```javascript
onKeyDown={(e) => {
  if (e.key === 'Enter' || e.key === ' ') {
    toggleMenu(item.menuId);
  }
}}
```

---

## ๐ ุนุจโุงุจ

### ููููุง ููุงุด ุฏุงุฏู ููโุดููุฏ:

1. ุจุฑุฑุณ ฺฉูุฏ API `/api/user/menus` ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ููุด ฺฉุงุฑุจุฑ ุจู ููููุง ุฏุณุชุฑุณ ุฏุงุฑุฏ
3. Console browser ุฑุง ุจุฑุง ุฎุทุงูุง ุจุฑุฑุณ ฺฉูุฏ

### ุฒุฑููููุง ุจุงุฒ ููโุดููุฏ:

1. ุจุฑุฑุณ ฺฉูุฏ `hasChildren: true` ุจุงุดุฏ
2. ุจุฑุฑุณ ฺฉูุฏ `children` array ุฎุงู ูุจุงุดุฏ
3. ุจุฑุฑุณ ฺฉูุฏ `toggleMenu` ุตุฏุง ุฒุฏู ูโุดูุฏ

### ุงุณุชุงูโูุง ุฏุฑุณุช ูุณุช:

1. ุจุฑุฑุณ ฺฉูุฏ CSS module import ุดุฏู ุจุงุดุฏ
2. ุจุฑุฑุณ ฺฉูุฏ CSS variables ุชุนุฑู ุดุฏู ุจุงุดูุฏ
3. Cache browser ุฑุง ูพุงฺฉ ฺฉูุฏ (Ctrl+F5)

---

## ๐ Performance

### ุจูููโุณุงุฒโูุง:

- โ **Lazy Rendering**: ููุท ููููุง ุจุงุฒ render ูโุดููุฏ
- โ **Memoization**: `formatMenuTree` ููุท ฺฉุจุงุฑ ุงุฌุฑุง ูโุดูุฏ
- โ **CSS Transitions**: ุงููุดูโูุง ุจุง CSS (ูู JavaScript)
- โ **Small Bundle**: ุจุฏูู ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงููโูุง ุณูฺฏู

---

## ๐ฏ ููุงุณู ูุจู ู ุจุนุฏ

### ูุจู (Flat List):

```
๐ ุฏุงุดุจูุฑุฏ
๐ฅ ูุณุช ฺฉุงุฑุจุฑุงู
๐ค ุงุฌุงุฏ ฺฉุงุฑุจุฑ
๐ ูุณุช ุฑูุฏุงุฏูุง
๐ ุงุฌุงุฏ ุฑูุฏุงุฏ
```

โ ูฺ ฺฏุฑููโุจูุฏ ูุณุช  
โ ููู ููููุง ุฏุฑ ฺฉ ุณุทุญ  
โ ุณุฎุช ูพุฏุง ฺฉุฑุฏู ููู

### ุจุนุฏ (Tree View):

```
๐ ุฏุงุดุจูุฑุฏ
๐ฅ ฺฉุงุฑุจุฑุงู โผ
   โโโ ูุณุช ฺฉุงุฑุจุฑุงู
   โโโ ุงุฌุงุฏ ฺฉุงุฑุจุฑ
๐ ุฑูุฏุงุฏูุง โผ
   โโโ ูุณุช ุฑูุฏุงุฏูุง
   โโโ ุงุฌุงุฏ ุฑูุฏุงุฏ
```

โ ฺฏุฑููโุจูุฏ ูุงุถุญ  
โ ุณูุณูู ูุฑุงุชุจ ูุดุฎุต  
โ ุฑุงุญุช ูพุฏุง ฺฉุฑุฏู ููู

---

**ูุณุฎู**: 1.0.0  
**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู**: 2025-10-29  
**ููุณูุฏู**: PlusMeet Team


